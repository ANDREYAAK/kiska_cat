# –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π –∏–≥—Ä—ã

## –ì–¥–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ —Å–µ–π—á–∞—Å?

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è **–≤ –±—Ä–∞—É–∑–µ—Ä–µ** –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏–≥—Ä–æ–∫–∞:
- **localStorage** - –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π (–¥–æ ~5-10 –ú–ë)
- **IndexedDB** - –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ (–¥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ì–ë)

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –æ—Ñ–ª–∞–π–Ω
- ‚úÖ –ë—ã—Å—Ç—Ä–æ –∏ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
- ‚ùå –î–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- ‚ùå –ú–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –∫—ç—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞

## –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ PostgreSQL (—Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ë–î)?

### –ù—É–∂–Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ë–î, –µ—Å–ª–∏:

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏**
   - –ò–≥—Ä–æ–∫ —Ö–æ—á–µ—Ç –∏–≥—Ä–∞—Ç—å –Ω–∞ –ü–ö, –ø–æ—Ç–æ–º –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ
   - –ù—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è–º —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

2. **–ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä –∏–ª–∏ –æ–±—â–∏–µ –º–∏—Ä—ã**
   - –ù–µ—Å–∫–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–æ–≤ —Å—Ç—Ä–æ—è—Ç –æ–¥–∏–Ω –≥–æ—Ä–æ–¥
   - –ù—É–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

3. **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –æ–±–ª–∞–∫–µ –Ω–µ –ø—Ä–æ–ø–∞–¥—É—Ç –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –∫—ç—à–∞
   - –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–æ—Å—Ç—Ä–æ–µ–∫
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏–≥—Ä–æ–∫–∞–º

5. **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è**
   - –ü–æ–∫—É–ø–∫–∏ –≤ –∏–≥—Ä–µ
   - –ü—Ä–µ–º–∏—É–º-—Ñ—É–Ω–∫—Ü–∏–∏
   - –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å PostgreSQL

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ë—Ä–∞—É–∑–µ—Ä   ‚îÇ
‚îÇ  (–∏–≥—Ä–∞)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ HTTP/REST API
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –°–µ—Ä–≤–µ—Ä    ‚îÇ
‚îÇ  (Node.js)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ SQL –∑–∞–ø—Ä–æ—Å—ã
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ PostgreSQL  ‚îÇ
‚îÇ  (–ë–î)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ö–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä?

### 1. –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–π API

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞ Node.js + Express + PostgreSQL:

```javascript
// server/routes/saves.js
app.put('/api/:userId/saves/:slotId', async (req, res) => {
  const { userId, slotId } = req.params;
  const saveData = req.body;
  
  await db.query(
    'INSERT INTO saves (user_id, slot_id, data, updated_at) VALUES ($1, $2, $3, NOW()) ON CONFLICT (user_id, slot_id) DO UPDATE SET data = $3, updated_at = NOW()',
    [userId, slotId, JSON.stringify(saveData)]
  );
  
  res.json({ success: true });
});
```

### 2. –ò–∑–º–µ–Ω–∏—Ç—å –≤ –∏–≥—Ä–µ

–í `Game.ts` –∑–∞–º–µ–Ω–∏—Ç—å –∞–¥–∞–ø—Ç–µ—Ä:

```typescript
// –ë—ã–ª–æ:
this.saveManager = new SaveManager();

// –°—Ç–∞–Ω–µ—Ç:
const serverAdapter = new ServerAdapter("https://api.–≤–∞—à-—Å–µ—Ä–≤–µ—Ä.com", userId);
this.saveManager = new SaveManager(serverAdapter);
```

## –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**:

1. **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
2. **–°–µ—Ä–≤–µ—Ä–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```typescript
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –ª–æ–∫–∞–ª—å–Ω–æ, –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
await localSaveManager.save("autosave", data);
await serverSaveManager.save("autosave", data);
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–∞—á–∞–ª–∞ (MVP):
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **IndexedDB** (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–æ –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ

### –ö–æ–≥–¥–∞ –∏–≥—Ä–∞ —Ä–∞—Å—Ç—ë—Ç:
- üîÑ –î–æ–±–∞–≤—å—Ç–µ **—Å–µ—Ä–≤–µ—Ä–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é**
- üîÑ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥**
- üîÑ –î–æ–±–∞–≤—å—Ç–µ **–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

### –ö–æ–≥–¥–∞ —Ç–æ—á–Ω–æ –Ω—É–∂–µ–Ω —Å–µ—Ä–≤–µ—Ä:
- –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä
- –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è
- –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

## –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î PostgreSQL

```sql
CREATE TABLE saves (
    id SERIAL PRIMARY KEY,
    user_id VARCHAR(255) NOT NULL,
    slot_id VARCHAR(255) NOT NULL,
    data JSONB NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(user_id, slot_id)
);

CREATE INDEX idx_saves_user_id ON saves(user_id);
```

## –ò—Ç–æ–≥–æ

**–°–µ–π—á–∞—Å:** –î–∞–Ω–Ω—ã–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (IndexedDB) - —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞

**–ü–æ—Ç–æ–º:** –ö–æ–≥–¥–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è - –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç–µ –∞–¥–∞–ø—Ç–µ—Ä –Ω–∞ `ServerAdapter`

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–∂–µ –≥–æ—Ç–æ–≤–∞ –¥–ª—è —ç—Ç–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞! üöÄ
